import{r as n,G as N,j as e,S as R,A as u}from"./app-EN_gyGxz.js";import{A as B}from"./AuthenticatedLayout-Bt2o64kt.js";import{I as i,T as g,a as x}from"./InputError-CU2Rhrr_.js";import{S as H,C as Q}from"./ConfirmModal-BgR3ff2T.js";import{S as z}from"./search-IHMbg-Qn.js";import{P as G,T as O}from"./trash-2-BE4G8w-V.js";import{C as U,a as V}from"./chevron-right-twvR3q8l.js";import"./alert-circle-B6C4OT6A.js";function se({auth:h,products:r,filters:S}){const[f,w]=n.useState(S.search||""),[C,l]=n.useState(!1),[k,p]=n.useState(!1),[m,v]=n.useState(null),[o,y]=n.useState(null),{data:d,setData:a,post:P,put:D,processing:b,errors:t,reset:A}=N({name:"",category:"",price:"",cost:"",stock:""}),{delete:F}=N(),T=r.data.reduce((s,c)=>s+c.stock,0),q=r.data.filter(s=>s.stock<10).length,I=s=>{s.preventDefault(),u.get("/products",{search:f},{preserveState:!0})},E=s=>{s.preventDefault(),m?D(`/products/${m.id}`,{preserveScroll:!0,onSuccess:()=>{l(!1),j()}}):P("/products",{preserveScroll:!0,onSuccess:()=>{l(!1),j()}})},L=s=>{v(s),a({name:s.name,category:s.category,price:s.price.toString(),cost:s.cost.toString(),stock:s.stock.toString()}),l(!0)},$=s=>{y(s),p(!0)},M=()=>{o&&F(`/products/${o.id}`,{preserveScroll:!0,onSuccess:()=>{p(!1),y(null)}})},j=()=>{A(),v(null)};return e.jsxs(B,{user:h.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800",children:"Products"}),children:[e.jsx(R,{title:"Products"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Products"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:r.total})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Stock"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:T})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Low Stock Alert"}),e.jsx("div",{className:"text-2xl font-semibold text-red-600",children:q})]})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-between",children:[e.jsxs("form",{onSubmit:I,className:"relative flex-1 max-w-md",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:f,onChange:s=>w(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),h.user.role==="owner"&&e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[e.jsx(G,{className:"w-5 h-5"}),"Add Product"]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sold"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:s.category})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:["Rp ",s.price.toLocaleString("id-ID")]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:["Rp ",s.cost.toLocaleString("id-ID")]}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium ${s.stock<10?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:s.stock})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:s.sold}),e.jsx("td",{className:"px-6 py-4 text-right text-sm",children:h.user.role==="owner"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>L(s),className:"text-blue-600 hover:text-blue-900 mr-3",children:e.jsx(H,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>$(s),className:"text-red-600 hover:text-red-900",children:e.jsx(O,{className:"w-4 h-4"})})]}):e.jsx("span",{className:"text-gray-400 text-xs",children:"View Only"})})]},s.id))})]}),r.last_page>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:r.data.length})," of"," ",e.jsx("span",{className:"font-medium",children:r.total})," results"]}),e.jsx("div",{className:"flex gap-2",children:r.links.map((s,c)=>s.label==="&laquo; Previous"?e.jsx("button",{onClick:()=>s.url&&u.get(s.url),disabled:!s.url,className:"px-3 py-1 border border-gray-300 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:e.jsx(U,{className:"w-4 h-4"})},c):s.label==="Next &raquo;"?e.jsx("button",{onClick:()=>s.url&&u.get(s.url),disabled:!s.url,className:"px-3 py-1 border border-gray-300 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:e.jsx(V,{className:"w-4 h-4"})},c):e.jsx("button",{onClick:()=>s.url&&u.get(s.url),className:`px-3 py-1 border rounded-lg text-sm ${s.active?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:s.label},c))})]})})]})]}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full shadow-xl",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:m?"Edit Product":"Add New Product"})}),e.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",value:"Name"}),e.jsx(g,{id:"name",value:d.name,onChange:s=>a("name",s.target.value),error:t.name,required:!0}),e.jsx(x,{message:t.name})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"category",value:"Category"}),e.jsxs("select",{id:"category",value:d.category,onChange:s=>a("category",s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all ${t.category?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Food",children:"Food"}),e.jsx("option",{value:"Beverages",children:"Beverages"}),e.jsx("option",{value:"Snacks",children:"Snacks"}),e.jsx("option",{value:"Dairy",children:"Dairy"}),e.jsx("option",{value:"Personal Care",children:"Personal Care"}),e.jsx("option",{value:"Household",children:"Household"})]}),e.jsx(x,{message:t.category})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"price",value:"Price"}),e.jsx(g,{id:"price",type:"number",value:d.price,onChange:s=>a("price",s.target.value),error:t.price,required:!0}),e.jsx(x,{message:t.price})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"cost",value:"Cost"}),e.jsx(g,{id:"cost",type:"number",value:d.cost,onChange:s=>a("cost",s.target.value),error:t.cost,required:!0}),e.jsx(x,{message:t.cost})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"stock",value:"Stock"}),e.jsx(g,{id:"stock",type:"number",value:d.stock,onChange:s=>a("stock",s.target.value),error:t.stock,required:!0}),e.jsx(x,{message:t.stock})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),j()},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium",disabled:b,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50",disabled:b,children:b?"Saving...":m?"Update":"Create"})]})]})]})}),e.jsx(Q,{show:k,title:"Delete Product",message:`Are you sure you want to delete "${o==null?void 0:o.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"danger",onConfirm:M,onCancel:()=>{p(!1),y(null)}})]})}export{se as default};
