import{r as d,G as b,j as e,S as F}from"./app-EN_gyGxz.js";import{A as I}from"./AuthenticatedLayout-Bt2o64kt.js";import{I as n,T as g,a as i}from"./InputError-CU2Rhrr_.js";import{S as L,C as k}from"./ConfirmModal-BgR3ff2T.js";import{S as $}from"./search-IHMbg-Qn.js";import{P as Q,T as z}from"./trash-2-BE4G8w-V.js";import{P as G,M as R,a as U}from"./phone-DJRcXkAL.js";import"./alert-circle-B6C4OT6A.js";function Y({auth:j,suppliers:v}){const[u,y]=d.useState(""),[N,t]=d.useState(!1),[w,m]=d.useState(!1),[c,f]=d.useState(null),[l,x]=d.useState(null),{data:o,setData:a,post:S,put:C,processing:h,errors:r,reset:M}=b({name:"",phone:"",email:"",address:"",products:""}),{delete:P}=b(),D=v.filter(s=>s.name.toLowerCase().includes(u.toLowerCase())||s.email.toLowerCase().includes(u.toLowerCase())),E=s=>{s.preventDefault(),c?C(`/suppliers/${c.id}`,{preserveScroll:!0,onSuccess:()=>{t(!1),p()}}):S("/suppliers",{preserveScroll:!0,onSuccess:()=>{t(!1),p()}})},T=s=>{f(s),a({name:s.name,phone:s.phone,email:s.email,address:s.address,products:s.products}),t(!0)},q=s=>{x(s),m(!0)},A=()=>{l&&P(`/suppliers/${l.id}`,{preserveScroll:!0,onSuccess:()=>{m(!1),x(null)}})},p=()=>{M(),f(null)};return e.jsxs(I,{user:j.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800",children:"Suppliers"}),children:[e.jsx(F,{title:"Suppliers"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search suppliers...",value:u,onChange:s=>y(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("button",{onClick:()=>t(!0),className:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[e.jsx(Q,{className:"w-5 h-5"}),"Add Supplier"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(s=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T(s),className:"text-blue-600 hover:text-blue-900",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>q(s),className:"text-red-600 hover:text-red-900",children:e.jsx(z,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(G,{className:"w-4 h-4"}),s.phone]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(R,{className:"w-4 h-4"}),s.email]}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-600",children:[e.jsx(U,{className:"w-4 h-4 mt-0.5"}),e.jsx("span",{children:s.address})]}),e.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Products:"}),e.jsx("p",{className:"text-gray-900",children:s.products})]})]})]},s.id))})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full shadow-xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c?"Edit Supplier":"Add New Supplier"})}),e.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"name",value:"Name"}),e.jsx(g,{id:"name",value:o.name,onChange:s=>a("name",s.target.value),error:r.name,required:!0}),e.jsx(i,{message:r.name})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"phone",value:"Phone"}),e.jsx(g,{id:"phone",type:"tel",value:o.phone,onChange:s=>a("phone",s.target.value),error:r.phone,required:!0}),e.jsx(i,{message:r.phone})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"email",value:"Email"}),e.jsx(g,{id:"email",type:"email",value:o.email,onChange:s=>a("email",s.target.value),error:r.email,required:!0}),e.jsx(i,{message:r.email})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"address",value:"Address"}),e.jsx("textarea",{id:"address",value:o.address,onChange:s=>a("address",s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all ${r.address?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,rows:2,required:!0}),e.jsx(i,{message:r.address})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"products",value:"Products"}),e.jsx("textarea",{id:"products",value:o.products,onChange:s=>a("products",s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all ${r.products?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,rows:2,placeholder:"e.g., Indomie, Mie Sedaap",required:!0}),e.jsx(i,{message:r.products})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{t(!1),p()},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50",disabled:h,children:h?"Saving...":c?"Update":"Create"})]})]})]})}),e.jsx(k,{show:w,title:"Delete Supplier",message:`Are you sure you want to delete "${l==null?void 0:l.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"danger",onConfirm:A,onCancel:()=>{m(!1),x(null)}})]})}export{Y as default};
