import{r as n,G as b,j as e,S as I}from"./app-EN_gyGxz.js";import{A as q}from"./AuthenticatedLayout-Bt2o64kt.js";import{I as c,T as f,a as m}from"./InputError-CU2Rhrr_.js";import{S as F,C as P}from"./ConfirmModal-BgR3ff2T.js";import{S as $}from"./search-IHMbg-Qn.js";import{P as R,T as z}from"./trash-2-BE4G8w-V.js";import{c as j}from"./alert-circle-B6C4OT6A.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=j("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=j("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function W({auth:d,users:v}){const[x,w]=n.useState(""),[N,a]=n.useState(!1),[S,u]=n.useState(!1),[t,y]=n.useState(null),[l,p]=n.useState(null),{data:i,setData:o,post:C,put:U,processing:h,errors:r,reset:k}=b({name:"",email:"",password:"",role:"employee"}),{delete:E}=b(),D=v.filter(s=>s.name.toLowerCase().includes(x.toLowerCase())||s.email.toLowerCase().includes(x.toLowerCase())),L=s=>{s.preventDefault(),t?U(`/users/${t.id}`,{preserveScroll:!0,onSuccess:()=>{a(!1),g()}}):C("/users",{preserveScroll:!0,onSuccess:()=>{a(!1),g()}})},M=s=>{y(s),o({name:s.name,email:s.email,password:"",role:s.role}),a(!0)},T=s=>{s.id!==d.user.id&&(p(s),u(!0))},A=()=>{l&&E(`/users/${l.id}`,{preserveScroll:!0,onSuccess:()=>{u(!1),p(null)}})},g=()=>{k(),y(null)};return e.jsxs(q,{user:d.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800",children:"Users"}),children:[e.jsx(I,{title:"Users"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:x,onChange:s=>w(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[e.jsx(R,{className:"w-5 h-5"}),"Add User"]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:[s.name,s.id===d.user.id&&e.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(You)"})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:s.email}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium ${s.role==="owner"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:[s.role==="owner"?e.jsx(Q,{className:"w-3 h-3 mr-1"}):e.jsx(G,{className:"w-3 h-3 mr-1"}),s.role]})}),e.jsxs("td",{className:"px-6 py-4 text-right text-sm",children:[e.jsx("button",{onClick:()=>M(s),className:"text-blue-600 hover:text-blue-900 mr-3",children:e.jsx(F,{className:"w-4 h-4"})}),s.id!==d.user.id&&e.jsx("button",{onClick:()=>T(s),className:"text-red-600 hover:text-red-900",children:e.jsx(z,{className:"w-4 h-4"})})]})]},s.id))})]})})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full shadow-xl",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t?"Edit User":"Add New User"})}),e.jsxs("form",{onSubmit:L,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"name",value:"Name"}),e.jsx(f,{id:"name",value:i.name,onChange:s=>o("name",s.target.value),error:r.name,required:!0}),e.jsx(m,{message:r.name})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"email",value:"Email"}),e.jsx(f,{id:"email",type:"email",value:i.email,onChange:s=>o("email",s.target.value),error:r.email,required:!0}),e.jsx(m,{message:r.email})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"password",value:t?"Password (leave blank to keep current)":"Password"}),e.jsx(f,{id:"password",type:"password",value:i.password,onChange:s=>o("password",s.target.value),error:r.password,required:!t}),e.jsx(m,{message:r.password})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"role",value:"Role"}),e.jsxs("select",{id:"role",value:i.role,onChange:s=>o("role",s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all ${r.role?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,required:!0,children:[e.jsx("option",{value:"employee",children:"Employee"}),e.jsx("option",{value:"owner",children:"Owner"})]}),e.jsx(m,{message:r.role})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{a(!1),g()},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50",disabled:h,children:h?"Saving...":t?"Update":"Create"})]})]})]})}),e.jsx(P,{show:S,title:"Delete User",message:`Are you sure you want to delete "${l==null?void 0:l.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"danger",onConfirm:A,onCancel:()=>{u(!1),p(null)}})]})}export{W as default};
