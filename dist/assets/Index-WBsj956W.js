import{r as c,j as e,S as C,A as x}from"./app-EN_gyGxz.js";import{A as I,X as u}from"./AuthenticatedLayout-Bt2o64kt.js";import{D as y}from"./index.es-Dz1KzVfi.js";import{D as _,C as b}from"./download-DGYclaNy.js";import{S as R}from"./search-IHMbg-Qn.js";import{c as E}from"./alert-circle-B6C4OT6A.js";import{C as L,a as F}from"./chevron-right-twvR3q8l.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=E("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function $({auth:j,transactions:l,filters:n}){const[i,m]=c.useState(n.search||""),[s,p]=c.useState(n.start_date?new Date(n.start_date):null),[a,h]=c.useState(n.end_date?new Date(n.end_date):null),[f,o]=c.useState(!1),[d,N]=c.useState(null),v=t=>{t&&t.preventDefault();const r={};i&&(r.search=i),s&&(r.start_date=s.toISOString().split("T")[0]),a&&(r.end_date=a.toISOString().split("T")[0]),x.get("/transactions",r,{preserveState:!0})},w=()=>{m(""),p(null),h(null),x.get("/transactions",{},{preserveState:!0})},g=!!(i||s||a),S=l.data.reduce((t,r)=>t+r.total,0),D=t=>{N(t),o(!0)},T=`/transactions/export${s||a?"?"+new URLSearchParams({...s&&{start_date:s.toISOString().split("T")[0]},...a&&{end_date:a.toISOString().split("T")[0]}}).toString():""}`;return e.jsxs(I,{user:j.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800",children:"Transactions"}),children:[e.jsx(C,{title:"Transactions"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Transactions"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:l.total})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Revenue"}),e.jsxs("div",{className:"text-2xl font-semibold text-green-600",children:["Rp ",S.toLocaleString("id-ID")]})]}),e.jsxs("a",{href:T,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-colors flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),"Export Excel"]})]})})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative md:col-span-2",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by ID or cashier...",value:i,onChange:t=>m(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none z-10"}),e.jsx(y,{selected:s,onChange:t=>p(t),selectsStart:!0,startDate:s||void 0,endDate:a||void 0,maxDate:a||void 0,placeholderText:"Start Date",dateFormat:"yyyy-MM-dd",isClearable:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none z-10"}),e.jsx(y,{selected:a,onChange:t=>h(t),selectsEnd:!0,startDate:s||void 0,endDate:a||void 0,minDate:s||void 0,placeholderText:"End Date",dateFormat:"yyyy-MM-dd",isClearable:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors",children:"Apply Filters"}),g&&e.jsxs("button",{type:"button",onClick:w,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Clear Filters"]})]}),g&&e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-200",children:[i&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:["Search: ",i]}),s&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800",children:["From: ",s.toISOString().split("T")[0]]}),a&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800",children:["To: ",a.toISOString().split("T")[0]]})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cashier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"No transactions found"})}):l.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["#",t.id]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.date}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.time}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.cashier_name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[t.products.length," items"]})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-semibold text-green-600",children:["Rp ",t.total.toLocaleString("id-ID")]}),e.jsx("td",{className:"px-6 py-4 text-right text-sm",children:e.jsxs("button",{onClick:()=>D(t),className:"text-blue-600 hover:text-blue-900 inline-flex items-center gap-1",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:"View Details"})]})})]},t.id))})]}),l.last_page>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:l.data.length})," ","of"," ",e.jsx("span",{className:"font-medium",children:l.total})," ","results"]}),e.jsx("div",{className:"flex gap-2",children:l.links.map((t,r)=>t.label==="&laquo; Previous"?e.jsx("button",{onClick:()=>t.url&&x.get(t.url),disabled:!t.url,className:"px-3 py-1 border border-gray-300 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:e.jsx(L,{className:"w-4 h-4"})},r):t.label==="Next &raquo;"?e.jsx("button",{onClick:()=>t.url&&x.get(t.url),disabled:!t.url,className:"px-3 py-1 border border-gray-300 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:e.jsx(F,{className:"w-4 h-4"})},r):e.jsx("button",{onClick:()=>t.url&&x.get(t.url),className:`px-3 py-1 border rounded-lg text-sm ${t.active?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:t.label},r))})]})})]})]}),f&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full shadow-xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Transaction Details #",d.id]}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(u,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Date"}),e.jsx("div",{className:"text-base font-semibold text-gray-900",children:d.date})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Time"}),e.jsx("div",{className:"text-base font-semibold text-gray-900",children:d.time})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Cashier"}),e.jsx("div",{className:"text-base font-semibold text-gray-900",children:d.cashier_name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Items"}),e.jsxs("div",{className:"text-base font-semibold text-gray-900",children:[d.products.length," items"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Products"}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Qty"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Price"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Subtotal"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.products.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.product_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-center",children:t.quantity}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600 text-right",children:["Rp"," ",t.price.toLocaleString("id-ID")]}),e.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900 text-right",children:["Rp"," ",(t.price*t.quantity).toLocaleString("id-ID")]})]},r))})]})})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["Rp"," ",d.total.toLocaleString("id-ID")]})]})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg",children:e.jsx("button",{onClick:()=>o(!1),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors",children:"Close"})})]})})]})}export{$ as default};
