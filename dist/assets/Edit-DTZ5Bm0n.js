import{r as E,G as y,j as e,S as A,A as N}from"./app-EN_gyGxz.js";import{A as I}from"./AuthenticatedLayout-Bt2o64kt.js";import{I as o,T as t,a as l}from"./InputError-CU2Rhrr_.js";import{c as S}from"./alert-circle-B6C4OT6A.js";import{S as P}from"./save-xpCLHLOk.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=S("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=S("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);function $({auth:k,user:s}){const[C,d]=E.useState(!1),{data:p,setData:x,put:_,processing:h,errors:i}=y({name:s.name,email:s.email}),{data:n,setData:c,put:D,processing:u,errors:a,reset:g}=y({current_password:"",password:"",password_confirmation:""}),U=r=>{r.preventDefault(),_("/profile",{preserveScroll:!0})},F=r=>{r.preventDefault(),D("/profile/password",{preserveScroll:!0,onSuccess:()=>{g(),d(!1)}})};return e.jsxs(I,{user:k.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800",children:"Profile Settings"}),children:[e.jsx(A,{title:"Profile"}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:s.photo?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`/storage/${s.photo}?t=${Date.now()}`,alt:s.name,className:"w-24 h-24 rounded-full object-cover border-4 border-blue-100",onLoad:()=>console.log("âœ… Image loaded successfully"),onError:r=>{console.error("âŒ Image failed to load"),console.error("Path:",`/storage/${s.photo}`),console.error("Full URL:",r.currentTarget.src)}}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 break-all max-w-[100px]",children:s.photo})]}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-100 flex items-center justify-center border-4 border-blue-200",children:e.jsx("span",{className:"text-3xl font-bold text-blue-600",children:s.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Profile Photo"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload a profile photo (JPG, PNG - Max 2MB)"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:"cursor-pointer px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Upload Photo",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:r=>{var f;if((f=r.target.files)!=null&&f[0]){console.log("ðŸ“ File selected:",r.target.files[0].name);const j=new FormData;j.append("photo",r.target.files[0]),N.post("/profile/photo",j,{forceFormData:!0,preserveScroll:!0,onSuccess:m=>{var b,w,v;console.log("âœ… Photo uploaded successfully");try{console.log("New photo path:",(v=(w=(b=m.props)==null?void 0:b.auth)==null?void 0:w.user)==null?void 0:v.photo)}catch{}window.location.reload()},onError:m=>{console.error("âŒ Upload failed:",m)}})}}})]}),s.photo&&e.jsx("button",{onClick:()=>{confirm("Remove profile photo?")&&N.delete("/profile/photo",{preserveScroll:!0,onSuccess:()=>{window.location.reload()}})},className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 font-medium transition-colors",children:"Remove"})]})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(M,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update your account profile information"})]})]}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",value:"Name"}),e.jsx(t,{id:"name",value:p.name,onChange:r=>x("name",r.target.value),error:i.name,required:!0}),e.jsx(l,{message:i.name})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",value:"Email"}),e.jsx(t,{id:"email",type:"email",value:p.email,onChange:r=>x("email",r.target.value),error:i.email,required:!0}),e.jsx(l,{message:i.email})]}),e.jsxs("div",{children:[e.jsx(o,{value:"Role"}),e.jsx("div",{className:"mt-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm text-gray-700",children:s.role.charAt(0).toUpperCase()+s.role.slice(1)}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Your role cannot be changed"})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(P,{className:"w-4 h-4"}),h?"Saving...":"Save Changes"]})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(q,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Update Password"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ensure your account is using a secure password"})]})]}),C?e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"current_password",value:"Current Password"}),e.jsx(t,{id:"current_password",type:"password",value:n.current_password,onChange:r=>c("current_password",r.target.value),error:a.current_password,required:!0}),e.jsx(l,{message:a.current_password})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"password",value:"New Password"}),e.jsx(t,{id:"password",type:"password",value:n.password,onChange:r=>c("password",r.target.value),error:a.password,required:!0}),e.jsx(l,{message:a.password}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Minimum 8 characters"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"password_confirmation",value:"Confirm Password"}),e.jsx(t,{id:"password_confirmation",type:"password",value:n.password_confirmation,onChange:r=>c("password_confirmation",r.target.value),error:a.password_confirmation,required:!0}),e.jsx(l,{message:a.password_confirmation})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{d(!1),g()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium text-gray-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(P,{className:"w-4 h-4"}),u?"Updating...":"Update Password"]})]})]}):e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors",children:"Change Password"})]})]})]})}export{$ as default};
